{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TRAVEL-GO PROFILE</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
    integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
    integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://kit.fontawesome.com/8ddc754e9e.js" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/jquery.validate.min.js"
    integrity="sha512-37T7leoNS06R80c8Ulq7cdCDU5MNQBwlYoy1TX/WUsLFC2eYNqtKlV0QjH7r8JpG/S0GUMZwebnVFLPd6SU5yg=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

</head>
<style>
     .no-edit {
            border: 0px;
            padding: 20px;
        }

        .edit-text {
            border: 1px solid black;
        }
  .error {
    color: red;
  }

  .navbar {

    width: 100%;
  }

  .one {
    color: white;
    text-decoration: none;
  }

  .two {
    color: white;
    text-decoration: none;
  }
</style>

<body>
  <div class="container-fluid">
    <div class="row">
      <div class="col-12">
        <nav class="navbar navbar-expand-lg navbar-light "
          style="background-color:white;border:  solid;color: black;height: 70px;">
          <div class="container-fluid">
            <a class="navbar-brand" href="/home/"><b>HOME</b></a>
            <form class="d-flex mx-auto">
              <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search"
                style="box-shadow: 5px 5px 5px;">
              <button class="btn btn-outline-success" type="submit">Search</button>
            </form>

          </div>
          <a type="button" class="btn btn-danger" href="{% url 'log_out' %}">
            <i class="fa-solid fa-arrow-right-from-bracket"> log out</i>
        </a>






      </div>
      </nav>
    </div>

    <div>
        <div class="container-fluid">
            <div class="row">
                <div class="col-12">
                    <h1 style="margin-top: 100px;">welcome back {{data.name}}</h1>
                </div>
                <br><br><br>
                <div class="row">
                    <div class="col-1"></div>
                    <div class="col-4 "
                        style="border: 1px;width: 400px;height: 300px;padding: 10px;box-shadow:5px 5px  10px #888888;">
                        <h4 style="display:inline;">Personel details</h4><i class="fa-solid fa-pen" id="personel-btn"
                            style="padding-left: 17px"></i>
                        <form action="/change_details" method="POST">
                            {% csrf_token %}

                            <br>
                            <h5> email</h5>
                            <span><label for="email"><input type="text" value="{{data.email}}" disabled readonly
                                        class="no-edit" id="email" name="email"></label></span>
                            <br><br>
                            <h5>Name</h5>
                            <span><label for="name"><input type="text" id="name" disabled readonly class="no-edit"
                                        value="{{data.name}}" name="name"></label></span><br><br>
                            {{errmsg}}
                            <div class="text-center"><button class="btn btn-success" id="personal_btn" hidden
                                    type="submit">update</button></div>
                    </div>
                    <div class="col-1"></div>
                    </form>
                    <div class="col-4 "
                        style="border: 1px;width: 400px;height: 300px;padding: 10px;box-shadow:5px 5px  10px #888888;">
                        <h4 style="display: inline;">update password</h4><i class="fa-solid fa-pen" id="password-btn"
                            style="padding-left: 17px"></i>


                        <br>
                        <h5> current password</h5>

                        <span><label for="current password"><input type="password" disabled placeholder="........"
                                    readonly id="old_password" class="no-edit" name="old_password"></label></span>
                        <br>
                        <span id="err_msg"></span>
                        <div id="new_password" hidden>
                            <h5>new password</h5>

                            <input type="password" id="new_passwd" name="new_password">
                        </div><br>{{msg}}
                        <div class="text-center"><button class="btn btn-success" id="password_btn" hidden
                                type="submit">update</button></div>


                    </div>
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col-1"></div>
                <div class="col-10" style="height: 400px;box-shadow: 5px  5px 10px #888888;">
                    <h1>Booking details</h1>
                </div>
            </div>
        </div>
    </div>
   




    <footer class="bg-dark text-center text-white" style="margin-top: 10px;">

      <!-- Grid container -->
      <div class="container p-4">
        <!-- Section: Social media -->
        <section class="mb-4">
          <!-- Facebook -->
          <a class="btn btn-outline-light btn-floating m-1" href="#!" role="button"><i
              class="fab fa-facebook-f"></i></a>

          <!-- Twitter -->
          <a class="btn btn-outline-light btn-floating m-1" href="#!" role="button"><i class="fab fa-twitter"></i></a>

          <!-- Google -->
          <a class="btn btn-outline-light btn-floating m-1" href="#!" role="button"><i class="fab fa-google"></i></a>

          <!-- Instagram -->
          <a class="btn btn-outline-light btn-floating m-1" href="#!" role="button"><i class="fab fa-instagram"></i></a>

          <!-- Linkedin -->

        </section>
        <br>
        <div class="row">
          <div class="col-2">
            <a href="" class="two">about us</a>
          </div>
          <div class="col-2">
            <a href="" class="two">contact us</a>
          </div>
          <div class="col-2" style="display: inline;">
            <a href="" class="two">T & c</a>
          </div>
          <div class="col-2"> <a href="" class="two">help</a>
          </div>
          <div class="col-2"></div>
          <div class="col-2">
            <a class="btn btn-outline-light btn-floating m-1" href="/host/" role="button"><i class='fas fa-building'
                style='color:rgb(19, 226, 216)'><br> list your property</i></a>

          </div>
          <br>

          <!-- Section: Text -->

          <!-- Section: Links -->
          <h1>HOTELS & RESORTS</h1><br>

          <section class="">

            <div class="row">

              <div class="col-lg-3 col-md-6 mb-4 mb-md-0">
                <h5 class="txt">INDIA</h5>

                <ul class="list-unstyled mb-0">
                  <li>
                    <a href="#!" class="one">Hotel in mumbai</a>
                  </li>
                  <li>
                    <a href="#!" class="one">Hotel in delhi</a>
                  </li>
                  <li>
                    <a href="#!" class="one">Hotel in kerala</a>
                  </li>
                  <li>
                    <a href="#!" class="one">Hotel in north india</a>
                  </li>
                </ul>
              </div>
              <div class="col-lg-3 col-md-6 mb-4 mb-md-0">
                <h5 class="txt">MIDDLE EAST</h5>

                <ul class="list-unstyled mb-0">
                  <li>
                    <a href="#!" class="one">Hotel in dubai</a>
                  </li>
                  <li>
                    <a href="#!" class="one">Hotel in abudhabi</a>
                  </li>
                  <li>
                    <a href="#!" class="one">Hotel in saudi</a>
                  </li>
                  <li>
                    <a href="#!" class="one">Hotel in qatar</a>
                  </li>
                </ul>
              </div>
              <div class="col-lg-3 col-md-6 mb-4 mb-md-0">
                <h5 class="txt">EUROPE</h5>

                <ul class="list-unstyled mb-0">
                  <li>
                    <a href="#!" class="one">Hotel in spain</a>
                  </li>
                  <li>
                    <a href="#!" class="one">Hotel in france</a>
                  </li>
                  <li>
                    <a href="#!" class="one">hotels in uk</a>
                  </li>
                  <li>
                    <a href="#!" class="one">Hotel in germeny</a>
                  </li>
                </ul>
              </div>
              <div class="col-lg-3 col-md-6 mb-4 mb-md-0">
                <h5 class="txt">OTHERS</h5>

                <ul class="list-unstyled mb-0">
                  <li>
                    <a href="#!" class="one">Hotel in usa</a>
                  </li>
                  <li>
                    <a href="#!" class="one">Hotel in maldivies</a>
                  </li>
                  <li>
                    <a href="#!" class="one">Hotel in bahmas</a>
                  </li>
                  <li>
                    <a href="#!" class="one">Hotel in eurasia</a>
                  </li>
                </ul>
              </div>
            </div>

          </section>


        </div>
        <!-- Grid container -->

        <!-- Copyright -->
        <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2);">
          © 2020 Copyright:
          <a class="text-white" href="">TRAVEL GO.com</a>
        </div>
        <!-- Copyright -->
    </footer>
  </div>
  <script>
    $(document).ready(function () {
        // $("#update").click(function () {
        //     $("input").show()
        // })

        $('#personel-btn').click(function () {
            var current_class = $('#email').attr('class')

            if (current_class == 'no-edit') {

                $('#email').attr({ 'class': 'edit-text', 'readonly': false, 'disabled': false }),
                    $('#name').attr({ 'class': 'edit-text', 'readonly': false, 'disabled': false }),
                    $('#personal_btn').attr({ 'hidden': false })
            }
            else {
                $('#email').attr({ 'class': 'no-edit', 'readonly': true, 'disabled': true }),
                    $('#name').attr({ 'class': 'no-edit', 'readonly': true, 'disabled': true }),
                    $('#personal_btn').attr({ 'hidden': true })
            }



        })
        $('#password-btn').click(function () {
            var password_class = $('#old_password').attr('class')
            if (password_class == 'no-edit') {

                $('#old_password').attr({ 'class': 'edit-text', 'readonly': false, 'disabled': false }),
                    $('#new_password').attr({ 'hidden': false }),
                    $('#password_btn').attr({ 'hidden': false })
            }
            else {
                $('#old_password').attr({ 'class': 'no-edit', 'readonly': true, 'disabled': true }),
                    $('#new_password').attr({ 'hidden': true }),
                    $('#password_btn').attr({ 'hidden': true })
            }




        })


        $('#password_btn').click(function () {
            $.ajax({
                url: '/change_password',
                type: 'GET',
                data: {
                    old_password: $('#old_password').val(),
                    new_passwd: $('#new_passwd').val()
                },
                success: function (response) {
                    console.log(response.status)
                    if (response.status == false) {
                         
                        alert('please enter correct password')
                        $('#err_msg').html('worng password')
                       }
                    else {
                      
                        print('gyhcgdc')
                        alert('updated successfully')
                        $('#old_password').attr({ 'class': 'no-edit', 'readonly': true, 'disabled': true }),
                    $('#new_password').attr({ 'hidden': true }),
                    $('#password_btn').attr({ 'hidden': true })

                    }

                },



            })
        })

    })


</script>


</body>

</html>